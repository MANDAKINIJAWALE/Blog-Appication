<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>login</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
	crossorigin="anonymous">
	
	
	  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    crossorigin="anonymous"
  />
  
 <link rel="stylesheet" href="styling.css">
 
   
   <script  src="/webjars/jquery/3.7.1/jquery.min.js"></script>
   
   
 
<script >
  
    $(document).ready(function()
  		  {
  	         $("#searchForm").on("submit",function(e)
  	        		 {
  	        	       e.preventDefault();  /* important: prevent form from submitting normally */
  	        	        $.ajax({
  	        	        	type:"GET",
  	        	        	url:"/ajaxSearchByUser",
  	        	        	data:
  	        	        		{
  	        	        		   search:$("#searchInput").val().trim()
  	        	              
  	        	        		},
  	        	        	success:function(result)
  	        	        	{
  	        	        		$("#allSearch").hide();
  	        	        		$("#searchContent").html(result);
  	        	        	}
  	        	        	
  	        	        	
  	        	        });
  	        	        
  	        		 });
  	  
  		  });
   
</script>
 
</head>
<body class="lightback">

	<div class="container-fluid">

		<!-- Navbar -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container-fluid">
    <a class="navbar-brand" href="./">Blog App</a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
      data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
      aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      
      <!-- Search Form aligned left -->
      <form class="d-flex me-auto ms-3" role="search" id="searchForm" style="width: 700px;">
        <input id="searchInput" class="form-control me-2" type="search" placeholder="Search Post "
          aria-label="Search" />
        <button id="searchButton" class="btn btn-outline-primary bg-light" type="submit">Search</button>
      </form>

      <!-- Nav items aligned right -->
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link active" href="/profile">Profile</a></li>
        <li class="nav-item"><a class="nav-link active" href="/savePost">Create Post</a></li>
        <li class="nav-item"><a class="nav-link active" href="/logout">Logout</a></li>
      </ul>
    </div>
  </div>
</nav>


	</div>
	
	<!-- User specific posts -->
	
	 <h1 class="text-center mt-5">Your Posts</h1>
	
		<div id="searchContent"></div>

      
	<div class="container mt-5" id="allSearch">
	
	  
	  <th:block th:if="${posts.size()==0}">
	   <div class="card shadow  col-md-6 offset-md-3 mt-5" >
	     <div class="card-body text-primary fs-4 text-center">
	        No Posts Available 
	     </div>
	   </div>
	  </th:block>
	  <div class="row ">
	    <div class="col-md-10 offset-md-1 p-3 "th:each="post:${posts}">
	      <div class="card shadow ">
	        <div class="card-body "  >
	          <h3 class="mb-3"><a href="/postdetails" class="card-title text-primary  fs-3">[[${post.title}]]</a> </h3>
	           <h6 class="card-subtitle text-dark mb-3 fw-light fst-italic">[[${post.shortDiscription}]]</h6>
	           
	           <div class="row">
	           <p class="mb-3 text-info small col"><i class="fa-solid fa-calendar-days"></i>&nbsp;Published on [[${post.updatedDate}]]</p>
	           <p class="text-end col"><a  th:href="@{'/postdetails?id='+${post.id}}"  class="btn btn-outline-primary">Read More<i class="fa-solid fa-arrow-right ms-2"></i></a></p>
	           </div>
	           
	        </div>
	       
	   
	      </div>
	    
	    </div>
	  
	  </div>
	
	
	
	</div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
		crossorigin="anonymous"></script>
</body>
</html>